App({
  onLaunch() {
    // 在本地存储中写入Base64格式的图标
    const icons = {
      search: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGwSURBVGhD7Zk9TsNAEIUNFCCBRAlIFJFoKGhoKWiQKJBS0vMLSHQUdEgoFQ0/JSUSIgoKJCSQEELi/YQdPGg9tjfx7qwdvk96sp3NeB5sx7F3O4FAIBAIBAJxQa/XW+31ek+4vcF9qLY0wPkKHJ/jtoDba9yWbKUBjvtw+ob7O+5XjAvcr3HfkN1koLkKhxc4zOL8F7fXuK3IfjyoX4ezX9zm5XgKXDdxX1OZeVDYhJMfOEviNAvcN1SmHtQ04eAXjvw4y4KaB9XMQfEGqr/hJI2jPKhbVe0sFKJqFw6SOsmLulVVT0OyqnZwUNaJF6pf0dAkJKmqHRwUcuCNRQ1OQoKqdsC46MALK1o6iTGqamfMQgZeWNXyCQxRVTvGhQy8UNfE/6iqnTELGXgh1VT6VFU7YxYy8ILPaeyrqnbGLGTgBZ/z2FVV7YxZyMALvldST1W1M2YhAy8UsSb7qqqdsQsZeKGoRX2sqnbgpIiFF5Z1NA6KmlhQPeB+htsX3JK4KBJc93BfUe0sFKJyC0fXcFLEF5s8qN9QzTwU1uF0H8dvcHqK2w5uS7IfCAQCgUCg43S7f2gN2zK3p23WAAAAAElFTkSuQmCC',
      'search-selected': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHCSURBVGhD7Zm/TsJQFMZRE3VQNN0cTIyJiw6OPoCJD+CiJg4mxsEHcHB0cHB0kKjR6OAkJCYOon9i1Pj9SgvXcm7bS+VeuH7JL5Rz7z3nm9PSQktWKpVKpVKpVOkol8vzURR14zjex/UY16UkzQY4n4PjU1xf4PYOtyVcZ5M0PWC+AMfnuP3E/QOur3Bdxn1F6elA8xwcnuD0F6d/uL3BbTWp8wP1FTj7wG0Wp1nguo37kspkA80NOLvC6SxOvcB9V2XSQc0anPzgMIujLKhZV5l4UFOBgzscZXGSB3WbKjMNRVU4uMVJHid5ULejMuOQXIGDa5xkcZIHdXsqMwqJczj4xFEWJ3lQt68yf5BUhoNrnGRxkgd1ByrzC0kzOLjESRYneVB3qDJ/kDSHg3OcZHGSB3VHKvMHSRUcnOEki5M8qKuqzB8klXBwipMsTvKgrqwyf5A0jYMTnGRxkgd1NZX5g6Q5HBzjJIuTPKg7VJk/SJrHwRFOsjjJg7oTlfmDpAUcHOIki5M8qDtTmT9IquLgACdZnORB3YXK/EHSIg72cZLFSR7UXarMHyQt4WAPJ1mc5EHdtcqoVCqVSqVSZVYm8w8J69xJpGjz6QAAAABJRU5ErkJggg==',
      add: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEKSURBVGhD7ZlBCsIwEEVz/6OIoBcQQfAaXkK8hKIX0I0IghvRheCiINj/k0YyMGnSTN1k4D94m2bafG3SZZMqCIIgCIIgpGg2qRbNVh0zB80VNEtolVycAZqLaJbQKhm4uYiWydI5aK6gWUKrZOIG0FxGs4RWyaQ1QHNNtB6bRTGAZgmtkklrgOa6aD02i2IAzRJaJZPWAM110XpsFsUAmiW0SiatAZrrovXYLIoBNEtolUxaAzTXReuxWRQDaJbQKpm0BmjeFa3HZlEMoFlCq2TSGqB5T7Qem0UxgGYJrZJJa4DmfdF6bBbFAJoltEomboB/+xOLwP9GI/zfWCj+d74gCIIgCEIuquoLlIXhD5egpZIAAAAASUVORK5CYII=',
      'add-selected': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEKSURBVGhD7ZlBCsIwEEVz/6OIoBcQQfAaXkK8hKIX0I0IghvRheCiINj/k0YyMGnSTN1k4D94m2bafG3SZZMqCIIgCIIgpGg2qRbNVh0zB80VNEtolVycAZqLaJbQKhm4uYiWydI5aK6gWUKrZOIG0FxGs4RWyaQ1QHNNtB6bRTGAZgmtkklrgOa6aD02i2IAzRJaJZPWAM110XpsFsUAmiW0SiatAZrrovXYLIoBNEtolUxaAzTXReuxWRQDaJbQKpm0BmjeFa3HZlEMoFlCq2TSGqB5T7Qem0UxgGYJrZJJa4DmfdF6bBbFAJoltEomboB/+xOLwP9GI/zfWCj+d74gCIIgCEIuquoLlIXhD5egpZIAAAAASUVORK5CYII='
    };

    // 将Base64图标写入本地文件系统
    const fs = wx.getFileSystemManager();
    Object.keys(icons).forEach(name => {
      try {
        fs.writeFileSync(
          `${wx.env.USER_DATA_PATH}/${name}.png`,
          icons[name].replace(/^data:image\/\w+;base64,/, ''),
          'base64'
        );
      } catch (e) {
        console.error(`写入图标失败: ${name}`, e);
      }
    });
  }
}); 